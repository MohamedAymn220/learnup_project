{% load static %}
<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />

    <title>ğŸ“š Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª</title>
    <link rel="icon" type="image/png" href="{% static 'images/images.png' %}">
    <link rel="stylesheet" href="{% static 'css/all_courses.css' %}" />
  </head>
  <body>
    <h1 class="title">ğŸ“š Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª</h1>

    {% if user.role == "instructor" %}
    <a href="{% url 'add_course' %}" class="btn">â• Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ±Ø³ Ø¬Ø¯ÙŠØ¯</a>
    {% endif %}
    <a href="{% url 'index' %}" class="btn home-btn">ğŸ  Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <div class="courses-container">
      {% for course in courses %}
      <div class="course-card">
        {% if course.image %}
        <img src="{{ course.image.url }}" alt="{{ course.title }}" />
        {% else %}
        <img src="{% static 'images/default-product-card.png' %}" alt="course" />
        {% endif %}

        <h2>{{ course.title }}</h2>
        <p>{{ course.description|truncatewords:15 }}</p>
        <span class="instructor">ğŸ‘¨â€ğŸ« {{ course.created_by.username }}</span>
        <!-- Ø²Ø± Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø¢Ù† -->
    <div class="course-actions mt-2">
      <a href="{% url 'view_course' course.id %}" class="btn btn-primary">
        ğŸ‘€ Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø¢Ù†
      </a>
    </div>

        {% if user.role == "instructor" and user == course.created_by %}
        <div class="course-actions">
          <a href="{% url 'edit_course' course.id %}" class="btn edit-btn"
            >âœï¸ ØªØ¹Ø¯ÙŠÙ„</a
          >

          <form
            method="post"
            action="{% url 'delete_course' course.id %}"
            style="display: inline"
          >
            {% csrf_token %}
            <button
              type="submit"
              class="btn delete-btn"
              onclick="return confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ±Ø³ØŸ')"
            >
              ğŸ—‘ï¸ Ø­Ø°Ù
            </button>
          </form>
        </div>
        {% endif %}
      </div>
      {% empty %}
      <p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙƒÙˆØ±Ø³Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.</p>
      {% endfor %}
    </div>
  </body>
</html>
